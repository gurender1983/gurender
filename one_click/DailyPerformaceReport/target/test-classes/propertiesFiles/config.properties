dburl = jdbc:oracle:thin:@10.14.193.20:1555/CBSREPDB
dbusername = reader1
dbuserpwd = reader1
API_Daily_Query = select /*++ parallel(64) ++*/ cod_service_id,max(txn_time_taken) max_time, round(avg(txn_time_taken),2) avg_time,count(1) txn_count from fcrhost.REC_TXN_LOG where dat_post=(select dat_last_process FRom fcrhost.ba_bank_mast) and txn_time_taken > 0 having count(1) > 10 group by cod_service_id order by cod_service_id
api_Hourly_Diff_Data = select /*++ parallel(64) ++*/ cod_service_id, to_char(extract(hour from to_timestamp(dat_req,'DD-MM-RR HH:MI:SS.FF AM'))) hr,cod_tran_stat, count(1) txn_count,round(avg(txn_time_taken),2) avg_resp_time from fcrhost.REC_TXN_LOG where dat_post=(select dat_last_process FRom fcrhost.ba_bank_mast) and txn_time_taken>500 having count(1) > 10 group by cod_service_id,to_char(extract(hour from to_timestamp(dat_req,'DD-MM-RR HH:MI:SS.FF AM'))),cod_tran_stat order by cod_service_id,to_char(extract(hour from to_timestamp(dat_req,'DD-MM-RR HH:MI:SS.FF AM')))
Hourly_API_Traffic = select to_char(extract(hour from to_timestamp(dat_req,'DD-MM-RR HH:MI:SS.FF AM'))) hr,cod_tran_stat, count(1) txn_count from fcrhost.REC_TXN_LOG where dat_post=(select dat_last_process FRom fcrhost.ba_bank_mast) and txn_time_taken>0 having count(1) > 10 group by to_char(extract(hour from to_timestamp(dat_req,'DD-MM-RR HH:MI:SS.FF AM'))),cod_tran_stat order by to_char(extract(hour from to_timestamp(dat_req,'DD-MM-RR HH:MI:SS.FF AM'))) 
Normal_API_Window = select /*++ parallel(64) ++*/ cod_service_id, round(avg(decode(cod_tran_stat,0,txn_time_taken,null)),2) avg_time_success, count(decode(cod_tran_stat,0,1,null)) txn_count_success, round(avg(decode(cod_tran_stat,7,txn_time_taken,null)),2) avg_time_fail, count(1) txn_count_total, count(decode(cod_tran_stat,7,1,null)) txn_count_fail from fcrhost.REC_TXN_LOG where dat_post=(select dat_last_process FRom fcrhost.ba_bank_mast) and txn_time_taken between 0 and  500 having count(1) > 10 group by cod_service_id order by cod_service_id
Worst_API_Window = select /*++ parallel(64) ++*/ cod_service_id, round(avg(decode(cod_tran_stat,7,txn_time_taken,null)),2) avg_time_fail, count(decode(cod_tran_stat,0,1,null)) txn_count_success, round(avg(decode(cod_tran_stat,0,txn_time_taken,null)),2) avg_time_success, count(1) txn_count_total, count(decode(cod_tran_stat,7,1,null)) txn_count_fail from fcrhost.REC_TXN_LOG where dat_post=(select dat_last_process FRom fcrhost.ba_bank_mast) and txn_time_taken > 500 having count(1) > 10 group by cod_service_id order by cod_service_id
Detail_GEFU_Data = select /*++ parallel(64) ++*/ cod_file_id, cod_xf_system, file_type,nam_hoff_file, to_date(dat_tim_proc_end,'DD-MON-YY HH24:MI:SS') end_time, to_date(dat_tim_proc_start,'DD-MON-YY HH24:MI:SS') start_time, round(extract(hour from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS')))) dur_hour, round(extract(minute from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS')))) dur_min, round(extract(second from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS')))) dur_sec, ctr_total_rec,ctr_process_rec,ctr_reject_rec, round(round(round(extract(hour from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS'))))*3600+ round(extract(minute from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS'))))*60+ round(extract(second from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS')))))*1000/ctr_total_rec,2) ms_per_rec from fcrhost.ext_file_upload_mast where dat_file_process=(select dat_last_process FRom fcrhost.ba_bank_mast) and cod_file_status = 5 and ctr_total_rec > 0 /*and dat_tim_proc_start between to_date('31-01-19 10:00:00 AM', 'DD-MM-YY HH:MI:SS PM') and to_date('31-01-19 12:00:01 PM', 'DD-MM-YY HH:MI:SS PM')*/ order by cod_xf_system,  file_type,nam_hoff_file
GEFU_Daily = select /*++ parallel(64) ++*/ cod_xf_system, file_type,count(*), max(round(extract(hour from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS'))))*60+ round(extract(minute from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS'))))+ round(extract(second from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS')))/60,2)) max_dur_min, round(avg(round(extract(hour from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS'))))*60+ round(extract(minute from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS'))))+ round(extract(second from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS')))/60,2))) avg_dur_min, min(round(extract(hour from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS'))))*60+ round(extract(minute from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS'))))+ round(extract(second from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS')))/60,2)) min_dur_min, sum(ctr_total_rec), max(round((extract(hour from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS')))*3600+ extract(minute from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS')))*60+ extract(second from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS'))))/ctr_total_rec,2)*1000) max_ms_per_rec, min(round((extract(hour from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS')))*3600+ extract(minute from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS')))*60+ extract(second from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS'))))/ctr_total_rec,2)*1000) min_ms_per_rec, round(avg(round((extract(hour from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS')))*3600+ extract(minute from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS')))*60+ extract(second from (to_timestamp(dat_tim_proc_end,'DD-MON-RR HH24:MI:SS')-to_timestamp(dat_tim_proc_start,'DD-MON-RR HH24:MI:SS'))))/ctr_total_rec,2)*1000)) avg_ms_per_rec from fcrhost.ext_file_upload_mast where dat_file_process=(select dat_last_process FRom fcrhost.ba_bank_mast) and cod_file_status = 5 group by cod_xf_system, file_type order by cod_xf_system,  file_type
EOD_Category = SELECT dat_process, (select txt_category from fcrhost.ba_eod_restart where cod_proc_category = b.cod_proc_category) "Category", cod_proc_category "Category Code", min(dat_proc_start) "Start Time", max(dat_proc_end) "End Time", LPAD(trunc((max(dat_proc_end) - min(dat_proc_start)) * 24), 2, '0') || ':' || LPAD((trunc((max(dat_proc_end) - min(dat_proc_start)) * 24 * 60) - trunc((max(dat_proc_end) - min(dat_proc_start)) * 24) * 60), 2, '0') || ':' || LPAD(round(((max(dat_proc_end) - min(dat_proc_start)) * 24 * 60 - trunc((max(dat_proc_end) - min(dat_proc_start)) * 24 * 60)) * 60, 2), 2, '0') "Time Taken HH:MI:SS" FROM fcrhost.BA_eod_history b where dat_process = (select dat_last_process FRom fcrhost.ba_bank_mast) and cod_proc_category in (1, 3, 16, 11, 30, 33, 13,91)  group by dat_process, cod_proc_category union SELECT dat_process, (select txt_category from fcrhost.ba_eod_restart where cod_proc_category = b.cod_proc_category) "Category", cod_proc_category "Category Code", min(dat_proc_start) "Start Time", max(dat_proc_end) "End Time", LPAD(trunc((max(dat_proc_end) - min(dat_proc_start)) * 24), 2, '0') || ':' || LPAD((trunc((max(dat_proc_end) - min(dat_proc_start)) * 24 * 60) - trunc((max(dat_proc_end) - min(dat_proc_start)) * 24) * 60), 2,  '0') || ':' || LPAD(round(((max(dat_proc_end) - min(dat_proc_start)) * 24 * 60 - trunc((max(dat_proc_end) - min(dat_proc_start)) * 24 * 60)) * 60, 2), 2, '0') "Time Taken HH:MI:SS" FROM fcrhost.BA_eod_history b where dat_process = (select dat_last_process FRom fcrhost.ba_bank_mast) and cod_proc_category in (2,80,40,39,68,13) group by dat_process, cod_proc_category  order by "Start Time"
EOD_Shell =  select dat_process, cod_proc_category, cod_eod_process, min(dat_proc_start), max(dat_proc_end), LPAD(trunc((max(dat_proc_end) - min(dat_proc_start)) * 24), 2, '0') || ':' || LPAD((trunc((max(dat_proc_end) - min(dat_proc_start)) * 24 * 60) - trunc((max(dat_proc_end) - min(dat_proc_start)) * 24) * 60), 2, '0') || ':' || LPAD(round(((max(dat_proc_end) - min(dat_proc_start)) * 24 * 60 - trunc((max(dat_proc_end) - min(dat_proc_start)) * 24 * 60)) * 60, 2), 2, '0') "TIME TAKEN-HH:MI:SS" from (SELECT (select a.cod_unstreamed_process from fcrhost.ba_eod_ctrl_param a where cod_proc_category = b.cod_proc_category and b.cod_eod_process = a.cod_eod_process) cod_eod_process, cod_proc_category, dat_process, dat_proc_start, dat_proc_end FROM fcrhost.BA_eod_history b where dat_process = (select dat_last_process FRom fcrhost.ba_bank_mast) and cod_proc_category in (1, 3, 16, 11, 30, 33, 13,91) union SELECT (select a.cod_unstreamed_process from fcrhost.ba_eod_ctrl_param a where cod_proc_category = b.cod_proc_category and b.cod_eod_process = a.cod_eod_process) "CATEGORY", cod_proc_category, dat_process, dat_proc_start, dat_proc_end FROM fcrhost.BA_eod_history b where dat_process = (select dat_last_process FRom fcrhost.ba_bank_mast) and cod_proc_category in (2,80,40,39,68,13) ) group by dat_process, cod_proc_category, cod_eod_process  order by 1, 4, 5
emailList = a_GurenderKumar.Kush@airtelbank.com;tushar.ranjan@airtelbank.com;vinay5.sharma@airtelbank.com;a_Anshul1.Agarwal@airtelbank.com;a_Rahul13.Kumar@airtelbank.com;spenju.kumar@airtelbank.com;apoorva.dwivedi@airtelbank.com;shivam.kapoor@airtelbank.com;ahmad.rashad@airtelbank.com;amit10.sharma@airtelbank.com;kul.sharma@airtelbank.com;ranjit.kumar@airtelbank.com;amit.taluja@airtelbank.com;a_Debashish.Panda@airtelbank.com
##host = smtp-mail.outlook.com
##port = 587
host = 10.56.131.8
port = 25
subject = AUTOEMAILER: Daily CBS Performance Report
isPortRequired = true
from = a_GurenderKumar.Kush@airtelbank.com
